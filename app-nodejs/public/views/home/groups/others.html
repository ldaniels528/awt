<div ng-controller="GroupListController" ng-init="init()">
    <div ng-controller="WorkloadController" ng-init="init('otherGroups.workloads')" class="row" style="margin-top: 10px">
        <div ng-hide="otherGroups.length || loading">
            <span class="bold">No groups found</span>
        </div>

        <div class="group_tile" ng-repeat="group in getGroups(otherGroups) | orderBy:'name'">
            <div>
                <b><i class="fa fa-group sk_group"></i> <a ng-href="#/home/groups/{{ group._id }}">{{ group.name }}</a></b> <span class="sk_null">&#8212;</span> {{ group.description }}
                <img ng-show="group.loading" src="/assets/images/status/loading16.gif">
                <span ng-hide="group.loading" class="small pull-right">{{ group.members.length | number:0 }} members</span>
            </div>
            <div>
                <span ng-repeat="member in group.memberUsers | orderBy:['firstName','lastName']">
                    <a ng-href="#/home/profile/{{ member._id }}">
                        <img class="avatar64 sk_clickable"
                             ng-if="member.avatarURL"
                             ng-src="{{ member.avatarURL }}"
                             title="{{ getFullName(member) }}">
                    </a>
                </span>
            </div>
            <div style="padding-top: 10px">
                <table style="width: 100%">
                    <thead>
                    <tr>
                        <th style="padding-left: 16px">Workload</th>
                        <th style="padding-left: 16px">Microsoft Lead</th>
                        <th style="text-align: center">Consumption</th>
                        <th style="text-align: center">Status / Next Steps</th>
                        <th style="text-align: center">Updated</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="workload in group.workloads">
                        <td class="col-md-3">
                            <i ng-class="getStatusIcon(workload)"></i>
                            <a class="sk_black" ng-href="#/home/profile/{{ workload.msftLeadId }}">{{ workload.name }}</a>
                        </td>
                        <td class="col-md-2">
                            <avatar class="avatar16" id="{{ workload.msftLeadId }}"></avatar>
                            <a class="sk_black" ng-href="#/home/profile/{{ workload.msftLeadId }}">{{ workload.msftLead }}</a>
                        </td>
                        <td class="col-md-1">
                           <span ng-show="workload.monthlyConsumptionEstimate" class="sk_currency pull-right">
                               ${{ workload.monthlyConsumptionEstimate | number:0 }}
                           </span>
                            <span ng-hide="workload.monthlyConsumptionEstimate" class="sk_tbd pull-right">TBD</span>
                        </td>
                        <td class="col-md-5">{{ getLatestStatusText(workload) }}</td>
                        <td class="col-md-1" style="font-size: 8pt; color: #0080ff">{{ getLatestStatusTime(workload) | duration }}</td>
                    </tr>
                    </tbody>
                </table>

                <ul ng-hide="group.workloads.length">
                    <li>No Active Workloads</li>
                </ul>
            </div>
        </div>
    </div>
</div>